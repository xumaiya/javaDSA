# Server Configuration
server.port=8080
spring.application.name=dsa-learning-platform

# H2 In-Memory Database Configuration (Changed to file-based for persistence)
spring.datasource.url=jdbc:h2:file:./data/dsaplatform;DB_CLOSE_DELAY=-1;DB_CLOSE_ON_EXIT=FALSE
spring.datasource.driverClassName=org.h2.Driver
spring.datasource.username=sa
spring.datasource.password=

# H2 Console (for debugging - access at http://localhost:8080/h2-console)
spring.h2.console.enabled=true
spring.h2.console.path=/h2-console
spring.h2.console.settings.web-allow-others=false

# JPA Configuration (Changed to update instead of create-drop)
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=false
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.H2Dialect
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.defer-datasource-initialization=true

# Initialize data after Hibernate creates schema
# Changed to 'never' since database persists and data already exists
spring.sql.init.mode=never
spring.sql.init.data-locations=classpath:data.sql

# Disable Flyway (using JPA auto-create for H2)
spring.flyway.enabled=false

# JWT Configuration (Increased expiration to 30 days)
jwt.secret=your-secret-key-change-this-in-production-use-a-strong-random-key-at-least-256-bits
jwt.expiration=2592000000
jwt.refresh-expiration=7776000000

# CORS Configuration
cors.allowed-origins=http://localhost:5173,http://localhost:3000
cors.allowed-methods=GET,POST,PUT,DELETE,PATCH,OPTIONS
cors.allowed-headers=*
cors.allow-credentials=true

# OpenRouter Configuration (OpenAI-compatible API)
openai.api-key=${OPENROUTER_API_KEY:your-openrouter-api-key}
openai.embedding-model=openai/text-embedding-3-small
openai.chat-model=openai/gpt-3.5-turbo
openai.max-tokens=500
openai.temperature=0.7
openai.base-url=https://openrouter.ai/api/v1
openai.connection-timeout=30000
openai.read-timeout=60000

# Legacy LLM properties (for backward compatibility)
llm.provider=openrouter
llm.api-key=${OPENROUTER_API_KEY:your-openrouter-api-key}
llm.model=openai/gpt-3.5-turbo
llm.max-tokens=500
llm.temperature=0.7

# RAG Configuration
rag.embedding-model=openai/text-embedding-3-small
rag.top-k-results=5
rag.similarity-threshold=0.7
rag.chunk-size=500
rag.chunk-overlap=50

# Rate Limiting Configuration (In-Memory)
rate-limit.requests-per-minute=10
rate-limit.enabled=true
rate-limit.window-size-seconds=60

# Gamification Configuration
gamification.points.lesson-complete=10
gamification.points.chapter-complete=50
gamification.points.course-complete=200
gamification.streak.bonus-multiplier=1.5

# Logging Configuration
logging.level.root=INFO
logging.level.com.dsaplatform=DEBUG
logging.level.org.springframework.security=INFO
logging.pattern.console=%d{yyyy-MM-dd HH:mm:ss} - %msg%n

# File Upload Configuration
spring.servlet.multipart.max-file-size=10MB
spring.servlet.multipart.max-request-size=10MB
